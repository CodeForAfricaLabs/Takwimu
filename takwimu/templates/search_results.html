{% extends 'takwimu/_layouts/page.html' %}
{% load wagtailcore_tags %}
{% load staticfiles %}

{% block content %}

  {% include 'takwimu/_includes/homepage/hero.html' %}

  <div class="container">
  <div class="m-2">
    <form action="{% url 'search' %}" method="get">
      <input type="text" name="q" value="{{ search_query }}" class="form-control">
      <input type="submit" value="Search" class="btn btn-primary">
    </form>
  </div>

    {% if search_results %}
      <ul>
        <h3>By Topic- {{ search_results.topic.count }} </h3>
        {% for result in search_results.topic.results %}
          <li>
            <h4><a href="{% pageurl result %}">{{ result }}</a></h4>
            {% if result.search_description %}
              {{ result.search_description|safe }}
            {% endif %}
          </li>
        {% endfor %}

        <h3>By Section - {{ search_results.section.count }} </h3>
        {% for result in search_results.section.results %}
          <li>
            <h4><a href="{% pageurl result %}">{{ result }}</a></h4>
            {% if result.search_description %}
              {{ result.search_description|safe }}
            {% endif %}
          </li>
        {% endfor %}
        <h3>By Country - {{ search_results.country.count }}</h3>
        {% for result in search_results.country.results %}
          <li>
            <h4><a href="{% pageurl result %}">{{ result }}</a></h4>
            {% if result.search_description %}
              {{ result.search_description|safe }}
            {% endif %}
          </li>
        {% endfor %}
      </ul>
    {% elif search_query %}
      No results found
    {% else %}
      Please type something into the search box
    {% endif %}
  </div>

{% endblock %}