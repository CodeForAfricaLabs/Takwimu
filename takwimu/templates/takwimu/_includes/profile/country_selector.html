{% load static geotags %}

<style>
  .country-selector button::after {
    content: none;
  }
  .section-list-country-head {
    text-align: center;
    display: block;
    font-size: 31px;
    font-weight: bold;
    line-height: 1.29;
  }
</style>

{% if selector == 'False' %}
  <div class="section-list-country-head">
      <img class="rounded-circle border-light mr-2"
          {% with country_slug=current_page.title|underscore_slugify %}
            src="{% static 'img/flags/'|add:country_slug|add:'.svg' %}"
          {% endwith %}
          style="border-style:double; width: 68px; height: 68px;"/>
      {{ current_page.title }}
  </div>
{% else %}
<div class="country-selector btn-group">
  <button class="btn btn-link btn-lg px-0 dropdown-toggle font-weight-bold {{ class_extra }}"
      type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"
      style="text-decoration: none; color:#000;"
      id="dropdownMenuButton_{{ dropdownMenuButton_id }}" >
    <img class="rounded-circle border-light mr-2"
        {% with country_slug=current_page.title|underscore_slugify %}
          src="{% static 'img/flags/'|add:country_slug|add:'.svg' %}"
        {% endwith %}
        style="border: solid 5px; box-shadow: 0 0 0 2pt rgba(237, 237, 236, 0.61); width: 50px; height: 50px;"/>
    {{ current_page.title }}
    <span>
      <i class="fa fa-angle-down fa-fw"></i>
    </span>
  </button>

  <div class="dropdown-menu py-0 rounded-0"
      aria-labelledby="dropdownMenuButton_{{ dropdownMenuButton_id }}">

    {% for country in countries %}
    {% if country.published %}
      <a class="dropdown-item p-3" href="/profiles/{{ country.name|slugify }}"
          data-value="{{ counrty.name }}">
        <img class="rounded-circle border-light mr-2"
            {% with country_slug=country.name|slugify %}
              src="{% static 'img/flags/'|add:country_slug|add:'.svg' %}"
            {% endwith %}
            style="border: solid 2px; box-shadow: 0 0 0 2pt rgba(237, 237, 236, 0.61); width: 30px; height: 30px;"/>
        {{ country.name_short }}
      </a>
    {% endif %}
    {% endfor %}
  </div>
</div>
{% endif %}


<!-- When you select a country, the selector changes. -->
<script type="text/javascript">
  window.addEventListener('load', function () {
    $('.country-selector .dropdown-menu a').click(function () {
      $(".country-selector button:first-child").html($(this).html());
    });
  });
</script>
